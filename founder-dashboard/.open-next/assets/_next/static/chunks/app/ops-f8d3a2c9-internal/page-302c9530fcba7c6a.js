(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{4439:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var s=a(5155),r=a(2115),n=a(5695),l=a(3915),o=a(6203),d=a(5317),i=a(6864);let c=0===(0,l.Dk)().length?(0,l.Wp)({apiKey:"AIzaSyBmFWrqHXfhJZS4t-vLj6CxjXQKGJKTJc4",authDomain:"goodwatchapp.firebaseapp.com",projectId:"goodwatchapp",storageBucket:"goodwatchapp.firebasestorage.app",messagingSenderId:"1064227633048",appId:"1:1064227633048:web:c3f8e5a2b9d4f6e7a8b9c0"}):(0,l.Dk)()[0],x=(0,o.xI)(c),u=(0,d.aU)(c),m=new o.HF;function h(e){let{onPasswordSuccess:t,showPasswordLogin:a,setShowPasswordLogin:n}=e,[l,d]=(0,r.useState)(""),[i,c]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),[p,b]=(0,r.useState)(""),[f,g]=(0,r.useState)(!1),[j,v]=(0,r.useState)(!1),y=async()=>{try{let e=await (0,o.df)(x,m);"parikshit0120@gmail.com"!==e.user.email&&(await x.signOut(),c("Unauthorized email address"))}catch(e){c(e instanceof Error?e.message:"Failed to sign in with Google")}},N=async e=>{e.preventDefault();try{(await fetch("/api/auth/verify-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:l})})).ok?t():c("Invalid password")}catch(e){c("Authentication failed")}},w=async e=>{e.preventDefault();try{(await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p})})).ok?(v(!0),c("")):c("Failed to send reset link")}catch(e){c("Failed to send reset link")}};return f?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#0a0a0f] px-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-[#1a1a1f] p-8 rounded-lg border border-[#2a2a2f]",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-[#e8e6e3] mb-6",children:"Reset Password"}),j?(0,s.jsx)("div",{className:"bg-green-900/20 border border-green-700 p-4 rounded mb-4",children:(0,s.jsxs)("p",{className:"text-green-400",children:["Reset link sent to ",p,". Check your inbox."]})}):(0,s.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-[#a8a6a3] mb-2",children:"Email"}),(0,s.jsx)("input",{type:"email",value:p,onChange:e=>b(e.target.value),className:"w-full px-4 py-2 bg-[#0a0a0f] border border-[#2a2a2f] rounded text-[#e8e6e3] focus:outline-none focus:border-[#d4a843]",placeholder:"hello@goodwatch.movie",required:!0})]}),i&&(0,s.jsx)("div",{className:"bg-red-900/20 border border-red-700 p-3 rounded text-sm text-red-400",children:i}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-[#d4a843] text-[#0a0a0f] py-2 px-4 rounded font-medium hover:bg-[#c49833] transition",children:"Send Reset Link"})]}),(0,s.jsx)("button",{onClick:()=>{g(!1),v(!1),c("")},className:"w-full mt-4 text-[#a8a6a3] text-sm hover:text-[#e8e6e3] transition",children:"← Back to login"})]})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#0a0a0f] px-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-[#1a1a1f] p-8 rounded-lg border border-[#2a2a2f]",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-[#e8e6e3] mb-2",children:"GoodWatch Ops"}),(0,s.jsx)("p",{className:"text-[#a8a6a3] mb-8",children:"Private founder dashboard"}),a?(0,s.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-[#a8a6a3] mb-2",children:"Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:u?"text":"password",value:l,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 bg-[#0a0a0f] border border-[#2a2a2f] rounded text-[#e8e6e3] focus:outline-none focus:border-[#d4a843]",placeholder:"Enter dashboard password",required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#a8a6a3] hover:text-[#e8e6e3]",children:u?"Hide":"Show"})]})]}),i&&(0,s.jsx)("div",{className:"bg-red-900/20 border border-red-700 p-3 rounded text-sm text-red-400",children:i}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-[#d4a843] text-[#0a0a0f] py-2 px-4 rounded font-medium hover:bg-[#c49833] transition",children:"Login"}),(0,s.jsx)("button",{type:"button",onClick:()=>g(!0),className:"w-full text-[#a8a6a3] text-sm hover:text-[#e8e6e3] transition",children:"Forgot password?"}),(0,s.jsx)("button",{type:"button",onClick:()=>n(!1),className:"w-full text-[#a8a6a3] text-sm hover:text-[#e8e6e3] transition",children:"← Back to Google login"})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("button",{onClick:y,className:"w-full bg-white text-gray-900 py-3 px-4 rounded font-medium flex items-center justify-center gap-3 hover:bg-gray-100 transition",children:[(0,s.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-[#2a2a2f]"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-[#1a1a1f] text-[#a8a6a3]",children:"or"})})]}),(0,s.jsx)("button",{onClick:()=>n(!0),className:"w-full bg-[#2a2a2f] text-[#e8e6e3] py-3 px-4 rounded font-medium hover:bg-[#3a3a3f] transition",children:"Use Password"})]})]})})}function p(){let[e,t]=(0,r.useState)({dau:0,newUsers:0,retention7d:0,sharesPerUser:0,revenue7d:0}),[a]=(0,r.useState)({dau:50,newUsers:25,retention7d:30,sharesPerUser:.1,revenue7d:100}),[n,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{o();let e=setInterval(o,3e5);return()=>clearInterval(e)},[]);let o=async()=>{try{let e=await fetch("/api/metrics/current");if(e.ok){let a=await e.json();t(a)}}catch(e){console.error("Failed to fetch metrics:",e)}finally{l(!1)}},d=e=>{let{label:t,value:a,target:r,format:l=e=>e.toFixed(0)}=e,o=0===r?0:(a-r)/r*100;return(0,s.jsxs)("div",{className:"bg-[#1a1a1f] border border-[#2a2a2f] rounded-lg p-4",children:[(0,s.jsx)("div",{className:"text-[#a8a6a3] text-sm mb-1",children:t}),(0,s.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-[#e8e6e3]",children:n?"—":l(a)}),(0,s.jsx)("div",{className:"text-sm font-medium ".concat(o>=0?"text-green-400":o>=-10?"text-yellow-400":"text-red-400"),children:!n&&(e=>{let t=e>=0?"+":"";return"".concat(t).concat(e.toFixed(1),"%")})(o)})]}),(0,s.jsxs)("div",{className:"text-[#6a6a6f] text-xs mt-1",children:["Target: ",l(r)]})]})};return(0,s.jsx)("div",{className:"bg-[#0a0a0f] border-b border-[#2a2a2f]",children:(0,s.jsx)("div",{className:"max-w-[1600px] mx-auto px-6 py-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[(0,s.jsx)(d,{label:"DAU",value:e.dau,target:a.dau}),(0,s.jsx)(d,{label:"New Users Today",value:e.newUsers,target:a.newUsers}),(0,s.jsx)(d,{label:"7D Retention",value:e.retention7d,target:a.retention7d,format:e=>"".concat(e.toFixed(1),"%")}),(0,s.jsx)(d,{label:"Shares per User",value:e.sharesPerUser,target:a.sharesPerUser,format:e=>e.toFixed(2)}),(0,s.jsx)(d,{label:"Revenue (7D)",value:e.revenue7d,target:a.revenue7d,format:e=>"$".concat(e.toFixed(0))})]})})})}function b(){var e;let[t,a]=(0,r.useState)(null),[n,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{o();let e=setInterval(o,6e5);return()=>clearInterval(e)},[]);let o=async()=>{try{let e=await fetch("/api/metrics/constraint");if(e.ok){let t=await e.json();a(t)}}catch(e){console.error("Failed to fetch constraint:",e)}finally{l(!1)}};return n?(0,s.jsx)("div",{className:"bg-[#2a2a2f] border-b border-[#3a3a3f]",children:(0,s.jsx)("div",{className:"max-w-[1600px] mx-auto px-6 py-4",children:(0,s.jsx)("div",{className:"text-[#a8a6a3] text-center",children:"Analyzing constraints..."})})}):t?(0,s.jsx)("div",{className:"border-b ".concat((e=>{switch(e){case"Growth":return"bg-blue-900/30 border-blue-700";case"Retention":return"bg-red-900/30 border-red-700";case"Monetization":return"bg-green-900/30 border-green-700";case"Product Velocity":return"bg-yellow-900/30 border-yellow-700";default:return"bg-gray-900/30 border-gray-700"}})(t.type)),children:(0,s.jsx)("div",{className:"max-w-[1600px] mx-auto px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-white font-bold text-lg",children:["CURRENT CONSTRAINT: ",t.type.toUpperCase()]}),(0,s.jsx)("div",{className:"h-6 w-px bg-white/20"}),(0,s.jsxs)("div",{className:"text-white/80 text-sm",children:[t.metric,": Target ",t.target," | Actual"," ",t.actual.toFixed(1)]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"font-bold ".concat(t.gap>=0?"text-green-400":"text-red-400"),children:(e=t.gap)>=0?"+".concat(e.toFixed(1)," above target"):"".concat(Math.abs(e).toFixed(1)," below target")}),(0,s.jsxs)("div",{className:"text-white/60 text-xs",children:["Detected ",new Date(t.detectedAt).toLocaleDateString()]})]})]})})}):null}function f(e){let{category:t}=e,[a,n]=(0,r.useState)([]),[l,o]=(0,r.useState)(!1),[i,c]=(0,r.useState)({title:"",linkedMetric:"",impactScore:3,effortScore:2,dueDate:""});(0,r.useEffect)(()=>{let e=(0,d.P)((0,d.rJ)(u,"tasks"),(0,d._M)("category","==",t),(0,d._M)("status","!=","done")),a=(0,d.aQ)(e,e=>{n(e.docs.map(e=>{var t,a;return{id:e.id,...e.data(),createdAt:(null==(t=e.data().createdAt)?void 0:t.toDate())||new Date,completedAt:null==(a=e.data().completedAt)?void 0:a.toDate()}}))});return()=>a()},[t]);let x=async e=>{e.preventDefault();try{await (0,d.gS)((0,d.rJ)(u,"tasks"),{...i,category:t,status:"backlog",createdAt:d.Dc.now()}),c({title:"",linkedMetric:"",impactScore:3,effortScore:2,dueDate:""}),o(!1)}catch(e){console.error("Failed to add task:",e)}},m=async(e,t)=>{try{let a=(0,d.H9)(u,"tasks",e),s={status:t};"done"===t&&(s.completedAt=d.Dc.now()),await (0,d.mZ)(a,s)}catch(e){console.error("Failed to update task:",e)}},h=e=>{let t=new Date(e),a=new Date,s=Math.floor((t.getTime()-a.getTime())/864e5);return s<0?5:0===s?4:1===s?3:s<=3?2:1},p=a.map(e=>({...e,urgency:h(e.dueDate),priority:e.impactScore*h(e.dueDate)})).sort((e,t)=>t.priority-e.priority).slice(0,3);return(0,s.jsxs)("div",{className:"bg-[#1a1a1f] border border-[#2a2a2f] rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-[#e8e6e3]",children:["Top 3 Priority Tasks - ",t]}),(0,s.jsx)("button",{onClick:()=>o(!l),className:"px-4 py-2 bg-[#d4a843] text-[#0a0a0f] rounded font-medium hover:bg-[#c49833] transition text-sm",children:l?"Cancel":"+ Add Task"})]}),l&&(0,s.jsxs)("form",{onSubmit:x,className:"mb-6 p-4 bg-[#0a0a0f] rounded border border-[#2a2a2f] space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-[#a8a6a3] mb-1",children:"Title"}),(0,s.jsx)("input",{type:"text",value:i.title,onChange:e=>c({...i,title:e.target.value}),className:"w-full px-3 py-2 bg-[#1a1a1f] border border-[#2a2a2f] rounded text-[#e8e6e3] text-sm focus:outline-none focus:border-[#d4a843]",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-[#a8a6a3] mb-1",children:"Linked Metric"}),(0,s.jsx)("input",{type:"text",value:i.linkedMetric,onChange:e=>c({...i,linkedMetric:e.target.value}),className:"w-full px-3 py-2 bg-[#1a1a1f] border border-[#2a2a2f] rounded text-[#e8e6e3] text-sm focus:outline-none focus:border-[#d4a843]",placeholder:"e.g., DAU, New Users",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-[#a8a6a3] mb-1",children:"Due Date"}),(0,s.jsx)("input",{type:"date",value:i.dueDate,onChange:e=>c({...i,dueDate:e.target.value}),className:"w-full px-3 py-2 bg-[#1a1a1f] border border-[#2a2a2f] rounded text-[#e8e6e3] text-sm focus:outline-none focus:border-[#d4a843]",required:!0})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-[#a8a6a3] mb-1",children:"Impact (1-5)"}),(0,s.jsx)("input",{type:"number",min:"1",max:"5",value:i.impactScore,onChange:e=>c({...i,impactScore:parseInt(e.target.value)}),className:"w-full px-3 py-2 bg-[#1a1a1f] border border-[#2a2a2f] rounded text-[#e8e6e3] text-sm focus:outline-none focus:border-[#d4a843]"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-[#a8a6a3] mb-1",children:"Effort (1-5)"}),(0,s.jsx)("input",{type:"number",min:"1",max:"5",value:i.effortScore,onChange:e=>c({...i,effortScore:parseInt(e.target.value)}),className:"w-full px-3 py-2 bg-[#1a1a1f] border border-[#2a2a2f] rounded text-[#e8e6e3] text-sm focus:outline-none focus:border-[#d4a843]"})]})]}),(0,s.jsx)("button",{type:"submit",className:"w-full px-4 py-2 bg-[#d4a843] text-[#0a0a0f] rounded font-medium hover:bg-[#c49833] transition text-sm",children:"Create Task"})]}),0===p.length?(0,s.jsx)("div",{className:"text-center py-8 text-[#6a6a6f]",children:"No active tasks. Add your first task to get started."}):(0,s.jsx)("div",{className:"space-y-3",children:p.map((e,t)=>(0,s.jsxs)("div",{className:"p-4 bg-[#0a0a0f] border border-[#2a2a2f] rounded hover:border-[#3a3a3f] transition",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsxs)("span",{className:"text-xs font-bold text-[#d4a843]",children:["#",t+1]}),(0,s.jsx)("span",{className:"text-sm font-medium text-[#e8e6e3]",children:e.title})]}),(0,s.jsxs)("div",{className:"text-xs text-[#a8a6a3]",children:["Metric: ",e.linkedMetric," | Impact: ",e.impactScore," | Urgency: ",e.urgency," | Priority Score: ",e.priority]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat("in_progress"===e.status?"bg-blue-900/30 text-blue-400":"bg-gray-800 text-gray-400"),children:e.status.replace("_"," ")})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-xs text-[#6a6a6f]",children:["Due: ",new Date(e.dueDate).toLocaleDateString()," |"," ",Math.floor((new Date(e.dueDate).getTime()-new Date().getTime())/864e5)," days left"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:["backlog"===e.status&&(0,s.jsx)("button",{onClick:()=>m(e.id,"in_progress"),className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Start"}),"in_progress"===e.status&&(0,s.jsx)("button",{onClick:()=>m(e.id,"done"),className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition",children:"Complete"})]})]})]},e.id))}),a.length>3&&(0,s.jsxs)("div",{className:"mt-4 text-center text-sm text-[#6a6a6f]",children:["+",a.length-3," more tasks in backlog"]})]})}function g(e){let{category:t}=e,[a,n]=(0,r.useState)([]),[l,o]=(0,r.useState)(!1),[i,c]=(0,r.useState)({description:"",metricTargeted:"",resultNote:""}),x=new Date().toISOString().split("T")[0],m=a.some(e=>e.date===x);(0,r.useEffect)(()=>{let e=(0,d.P)((0,d.rJ)(u,"shipLogs"),(0,d.My)("date","desc"),(0,d.AB)(10)),t=(0,d.aQ)(e,e=>{n(e.docs.map(e=>{var t;return{id:e.id,...e.data(),createdAt:(null==(t=e.data().createdAt)?void 0:t.toDate())||new Date}}))});return()=>t()},[]);let h=async e=>{e.preventDefault();try{await (0,d.gS)((0,d.rJ)(u,"shipLogs"),{...i,date:x,createdAt:d.Dc.now()}),c({description:"",metricTargeted:"",resultNote:""}),o(!1)}catch(e){console.error("Failed to log ship:",e)}};return(0,s.jsxs)("div",{className:"bg-[#1a1a1f] border border-[#2a2a2f] rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-[#e8e6e3]",children:"Ship Log"}),!m&&(0,s.jsx)("button",{onClick:()=>o(!l),className:"px-4 py-2 bg-green-600 text-white rounded font-medium hover:bg-green-700 transition text-sm",children:l?"Cancel":"Ship Something Today"}),m&&(0,s.jsx)("span",{className:"px-3 py-1 bg-green-900/30 text-green-400 text-sm font-medium rounded",children:"✓ Shipped today"})]}),l&&(0,s.jsxs)("form",{onSubmit:h,className:"mb-6 p-4 bg-[#0a0a0f] rounded border border-[#2a2a2f] space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-[#a8a6a3] mb-1",children:"What shipped?"}),(0,s.jsx)("textarea",{value:i.description,onChange:e=>c({...i,description:e.target.value}),className:"w-full px-3 py-2 bg-[#1a1a1f] border border-[#2a2a2f] rounded text-[#e8e6e3] text-sm focus:outline-none focus:border-[#d4a843] resize-none",rows:3,placeholder:"Describe what you shipped...",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-[#a8a6a3] mb-1",children:"Metric Targeted"}),(0,s.jsx)("input",{type:"text",value:i.metricTargeted,onChange:e=>c({...i,metricTargeted:e.target.value}),className:"w-full px-3 py-2 bg-[#1a1a1f] border border-[#2a2a2f] rounded text-[#e8e6e3] text-sm focus:outline-none focus:border-[#d4a843]",placeholder:"e.g., Retention, Growth, DAU",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-[#a8a6a3] mb-1",children:"Expected Result (optional)"}),(0,s.jsx)("input",{type:"text",value:i.resultNote,onChange:e=>c({...i,resultNote:e.target.value}),className:"w-full px-3 py-2 bg-[#1a1a1f] border border-[#2a2a2f] rounded text-[#e8e6e3] text-sm focus:outline-none focus:border-[#d4a843]",placeholder:"What impact do you expect?"})]}),(0,s.jsx)("button",{type:"submit",className:"w-full px-4 py-2 bg-green-600 text-white rounded font-medium hover:bg-green-700 transition text-sm",children:"Log Ship"})]}),0===a.length?(0,s.jsx)("div",{className:"text-center py-8 text-[#6a6a6f]",children:"No ships logged yet. Ship something today!"}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-[#2a2a2f]",children:[(0,s.jsx)("th",{className:"text-left py-2 px-3 text-[#a8a6a3] font-medium",children:"Date"}),(0,s.jsx)("th",{className:"text-left py-2 px-3 text-[#a8a6a3] font-medium",children:"What Shipped"}),(0,s.jsx)("th",{className:"text-left py-2 px-3 text-[#a8a6a3] font-medium",children:"Metric"}),(0,s.jsx)("th",{className:"text-left py-2 px-3 text-[#a8a6a3] font-medium",children:"Result"})]})}),(0,s.jsx)("tbody",{children:a.map(e=>(0,s.jsxs)("tr",{className:"border-b border-[#2a2a2f]/50 hover:bg-[#0a0a0f] transition",children:[(0,s.jsx)("td",{className:"py-3 px-3 text-[#e8e6e3]",children:new Date(e.date).toLocaleDateString()}),(0,s.jsx)("td",{className:"py-3 px-3 text-[#e8e6e3]",children:e.description}),(0,s.jsx)("td",{className:"py-3 px-3",children:(0,s.jsx)("span",{className:"px-2 py-1 bg-[#d4a843]/20 text-[#d4a843] rounded text-xs",children:e.metricTargeted})}),(0,s.jsx)("td",{className:"py-3 px-3 text-[#a8a6a3]",children:e.resultNote||"—"})]},e.id))})]})})]})}function j(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),[i,c]=(0,r.useState)({title:"",content:"",category:""});(0,r.useEffect)(()=>{let e=(0,d.P)((0,d.rJ)(u,"contextNotes"),(0,d.My)("updatedAt","desc")),a=(0,d.aQ)(e,e=>{t(e.docs.map(e=>{var t,a;return{id:e.id,...e.data(),createdAt:(null==(t=e.data().createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(a=e.data().updatedAt)?void 0:a.toDate())||new Date}}))});return()=>a()},[]);let x=async e=>{e.preventDefault();try{if(l){let e=(0,d.H9)(u,"contextNotes",l.id);await (0,d.mZ)(e,{...i,updatedAt:d.Dc.now()}),o(null)}else await (0,d.gS)((0,d.rJ)(u,"contextNotes"),{...i,createdAt:d.Dc.now(),updatedAt:d.Dc.now()});c({title:"",content:"",category:""}),n(!1)}catch(e){console.error("Failed to save note:",e)}},m=async e=>{if(confirm("Delete this note?"))try{await (0,d.kd)((0,d.H9)(u,"contextNotes",e))}catch(e){console.error("Failed to delete note:",e)}};return(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"bg-[#1a1a1f] border border-[#2a2a2f] rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-[#e8e6e3]",children:"Context & Knowledge Base"}),(0,s.jsx)("p",{className:"text-sm text-[#a8a6a3] mt-1",children:"Add important context, docs, and notes that AI can reference"})]}),(0,s.jsx)("button",{onClick:()=>n(!a),className:"px-4 py-2 bg-[#d4a843] text-[#0a0a0f] rounded font-medium hover:bg-[#c49833] transition text-sm",children:a?"Cancel":"+ Add Note"})]}),a&&(0,s.jsxs)("form",{onSubmit:x,className:"mb-6 p-4 bg-[#0a0a0f] rounded border border-[#2a2a2f] space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-[#a8a6a3] mb-1",children:"Title"}),(0,s.jsx)("input",{type:"text",value:i.title,onChange:e=>c({...i,title:e.target.value}),className:"w-full px-3 py-2 bg-[#1a1a1f] border border-[#2a2a2f] rounded text-[#e8e6e3] text-sm focus:outline-none focus:border-[#d4a843]",placeholder:"e.g., Product Philosophy, User Feedback, Market Research",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-[#a8a6a3] mb-1",children:"Category"}),(0,s.jsx)("input",{type:"text",value:i.category,onChange:e=>c({...i,category:e.target.value}),className:"w-full px-3 py-2 bg-[#1a1a1f] border border-[#2a2a2f] rounded text-[#e8e6e3] text-sm focus:outline-none focus:border-[#d4a843]",placeholder:"e.g., Strategy, Documentation, Insights",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-[#a8a6a3] mb-1",children:"Content"}),(0,s.jsx)("textarea",{value:i.content,onChange:e=>c({...i,content:e.target.value}),className:"w-full px-3 py-2 bg-[#1a1a1f] border border-[#2a2a2f] rounded text-[#e8e6e3] text-sm focus:outline-none focus:border-[#d4a843] resize-none font-mono",rows:8,placeholder:"Add detailed context, documentation, insights, or any information the AI should know...",required:!0})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-[#d4a843] text-[#0a0a0f] rounded font-medium hover:bg-[#c49833] transition text-sm",children:l?"Update Note":"Save Note"}),l&&(0,s.jsx)("button",{type:"button",onClick:()=>{o(null),c({title:"",content:"",category:""}),n(!1)},className:"px-4 py-2 bg-[#2a2a2f] text-[#e8e6e3] rounded font-medium hover:bg-[#3a3a3f] transition text-sm",children:"Cancel"})]})]}),0===e.length?(0,s.jsxs)("div",{className:"text-center py-12 text-[#6a6a6f]",children:[(0,s.jsx)("p",{children:"No context notes yet."}),(0,s.jsx)("p",{className:"text-sm mt-2",children:"Add knowledge, docs, and insights that AI can reference when giving suggestions."})]}):(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,s.jsxs)("div",{className:"p-4 bg-[#0a0a0f] border border-[#2a2a2f] rounded hover:border-[#3a3a3f] transition",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-medium text-[#e8e6e3] mb-1",children:e.title}),(0,s.jsx)("span",{className:"inline-block px-2 py-0.5 bg-[#d4a843]/20 text-[#d4a843] rounded text-xs",children:e.category})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{o(e),c({title:e.title,content:e.content,category:e.category}),n(!0)},className:"text-xs text-[#a8a6a3] hover:text-[#e8e6e3] transition",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>m(e.id),className:"text-xs text-red-400 hover:text-red-300 transition",children:"Delete"})]})]}),(0,s.jsx)("p",{className:"text-sm text-[#a8a6a3] whitespace-pre-wrap font-mono bg-[#1a1a1f] p-3 rounded border border-[#2a2a2f] max-h-48 overflow-y-auto",children:e.content}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-[#6a6a6f]",children:["Updated ",e.updatedAt.toLocaleDateString()," at"," ",e.updatedAt.toLocaleTimeString()]})]},e.id))})]})})}function v(e){let{activeTab:t}=e;return"Context"===t?(0,s.jsx)(j,{}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(f,{category:t}),(0,s.jsx)(g,{category:t})]})}function y(e){let{activeTab:t}=e,[a,n]=(0,r.useState)([]),[l,o]=(0,r.useState)(""),[d,i]=(0,r.useState)(!1),c=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e;null==(e=c.current)||e.scrollIntoView({behavior:"smooth"})},[a]),(0,r.useEffect)(()=>{0===a.length&&x()},[t]);let x=async()=>{i(!0);try{let e=await fetch("/api/ai/proactive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tab:t})});if(e.ok){let t=await e.json();n([{role:"assistant",content:t.suggestion}])}}catch(e){console.error("Failed to get proactive suggestion:",e)}finally{i(!1)}},u=async e=>{if(e.preventDefault(),!l.trim())return;let s={role:"user",content:l};n(e=>[...e,s]),o(""),i(!0);try{let e=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[...a,s],tab:t})});if(e.ok){let t=await e.json();n(e=>[...e,{role:"assistant",content:t.response}])}else n(e=>[...e,{role:"assistant",content:"Sorry, I encountered an error. Please try again."}])}catch(e){console.error("Chat error:",e),n(e=>[...e,{role:"assistant",content:"Failed to connect. Please check your connection."}])}finally{i(!1)}};return(0,s.jsxs)("div",{className:"bg-[#1a1a1f] border border-[#2a2a2f] rounded-lg flex flex-col h-[calc(100vh-300px)]",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-[#2a2a2f]",children:[(0,s.jsx)("h3",{className:"font-bold text-[#e8e6e3]",children:"AI Assistant"}),(0,s.jsxs)("p",{className:"text-xs text-[#a8a6a3] mt-1",children:["Context-aware suggestions for ",t]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===a.length&&!d&&(0,s.jsxs)("div",{className:"text-center text-[#6a6a6f] text-sm py-8",children:["Ask me anything about your ",t," strategy, tasks, or metrics."]}),a.map((e,t)=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsx)("div",{className:"max-w-[85%] rounded-lg p-3 text-sm ".concat("user"===e.role?"bg-[#d4a843] text-[#0a0a0f]":"bg-[#0a0a0f] border border-[#2a2a2f] text-[#e8e6e3]"),children:e.content})},t)),d&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-[#0a0a0f] border border-[#2a2a2f] rounded-lg p-3 text-sm text-[#a8a6a3]",children:"Thinking..."})}),(0,s.jsx)("div",{ref:c})]}),(0,s.jsx)("form",{onSubmit:u,className:"p-4 border-t border-[#2a2a2f]",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:l,onChange:e=>o(e.target.value),placeholder:"Ask for suggestions...",className:"flex-1 px-3 py-2 bg-[#0a0a0f] border border-[#2a2a2f] rounded text-[#e8e6e3] text-sm focus:outline-none focus:border-[#d4a843]",disabled:d}),(0,s.jsx)("button",{type:"submit",disabled:d||!l.trim(),className:"px-4 py-2 bg-[#d4a843] text-[#0a0a0f] rounded font-medium hover:bg-[#c49833] transition text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Send"})]})})]})}(0,i.P5)(c);let N=["Product","Growth","Marketing","Tech","Monetization","Partnerships","Bugs","Analytics","Experiments","Content","Context"];function w(){let[e,t]=(0,r.useState)("Product"),[a,n]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"min-h-screen bg-[#0a0a0f]",children:[(0,s.jsx)(p,{}),(0,s.jsx)(b,{}),(0,s.jsx)("div",{className:"border-b border-[#2a2a2f] bg-[#1a1a1f]",children:(0,s.jsx)("div",{className:"max-w-[1600px] mx-auto px-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex gap-1 overflow-x-auto py-2",children:N.map(a=>(0,s.jsx)("button",{onClick:()=>t(a),className:"px-4 py-2 text-sm font-medium rounded transition whitespace-nowrap ".concat(e===a?"bg-[#d4a843] text-[#0a0a0f]":"text-[#a8a6a3] hover:text-[#e8e6e3] hover:bg-[#2a2a2f]"),children:a},a))}),(0,s.jsxs)("button",{onClick:()=>n(!a),className:"ml-4 px-4 py-2 bg-[#2a2a2f] text-[#e8e6e3] rounded text-sm font-medium hover:bg-[#3a3a3f] transition whitespace-nowrap",children:[a?"Hide":"Show"," AI Chat"]})]})})}),(0,s.jsx)("div",{className:"max-w-[1600px] mx-auto px-6 py-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:a?"lg:col-span-2":"lg:col-span-3",children:(0,s.jsx)(v,{activeTab:e})}),a&&(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsx)(y,{activeTab:e})})]})})]})}var S=a(9509);function k(){let[e,t]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!0),[d,i]=(0,r.useState)(!1),c=(0,n.useRouter)();return((0,r.useEffect)(()=>{let e=(0,o.hg)(x,async e=>{e&&e.email===S.env.NEXT_PUBLIC_ADMIN_EMAIL?t(!0):(e&&await x.signOut(),t(!1)),l(!1)});return"true"===sessionStorage.getItem("dashboard_auth")&&(t(!0),l(!1)),()=>e()},[c]),a)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#0a0a0f]",children:(0,s.jsx)("div",{className:"text-[#e8e6e3]",children:"Loading..."})}):e?(0,s.jsx)(w,{}):(0,s.jsx)(h,{onPasswordSuccess:()=>{sessionStorage.setItem("dashboard_auth","true"),t(!0)},showPasswordLogin:d,setShowPasswordLogin:i})}},6481:(e,t,a)=>{Promise.resolve().then(a.bind(a,4439))}},e=>{e.O(0,[992,811,860,441,964,358],()=>e(e.s=6481)),_N_E=e.O()}]);