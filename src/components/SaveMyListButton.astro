---
// SaveMyListButton.astro - Explicit trigger for optional signup
// Use on watchlist page or anywhere user might want to persist data
// Only shows if user has saved movies but not signed up
---

<div id="save-list-container" class="hidden">
  <button 
    data-trigger-signup
    class="flex items-center gap-2 bg-gw-accent/10 hover:bg-gw-accent hover:text-gw-bg border border-gw-accent/30 hover:border-gw-accent px-4 py-2 rounded-lg text-sm font-medium transition"
  >
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
    </svg>
    Save my list
  </button>
  <p class="text-xs text-gw-text-secondary mt-1">Access your picks on any device</p>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const container = document.getElementById('save-list-container');
    
    // Only show if:
    // 1. User has saved movies
    // 2. User is NOT signed up
    const tasteData = JSON.parse(localStorage.getItem('goodwatch_taste') || '{}');
    const userData = localStorage.getItem('goodwatch_user');
    
    const hasSavedMovies = (tasteData.savedMovies?.length || 0) > 0;
    const isSignedUp = !!userData;
    
    if (hasSavedMovies && !isSignedUp) {
      container?.classList.remove('hidden');
    }
  });
</script>
